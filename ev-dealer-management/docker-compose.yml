version: '3.8'
services:
  userservice:
    build: ./UserService
    image: evdealer/userservice:local
    container_name: evm_userservice
    ports:
      - "5223:80"
    volumes:
      - ./UserService/data:/app/data
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings__DefaultConnection=Data Source=/app/data/users.db
      - Jwt__Key=ReplaceThisWithASecretKeyForDevelopment
      - Jwt__Issuer=evm.local
      - Jwt__Audience=evm.local
      - FrontendUrl=http://localhost:5173
      - EmailSettings__SmtpHost=smtp.gmail.com
      - EmailSettings__SmtpPort=587
      - EmailSettings__SmtpUser=bata79892@gmail.com
      - EmailSettings__SmtpPassword=rgiksegnoxayweeo
      - EmailSettings__FromEmail=bata79892@gmail.com
      - EmailSettings__FromName=EV Dealer
      - EmailSettings__EnableSsl=true
    restart: unless-stopped

  vehicleservice:
    build: ./VehicleService
    image: evdealer/vehicleservice:local
    container_name: evm_vehicleservice
    ports:
      - "5224:80"
    volumes:
      - ./VehicleService/data:/app/data
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings__DefaultConnection=Data Source=/app/data/vehicles.db
    restart: unless-stopped
